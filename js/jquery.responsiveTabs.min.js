/**
 * responsive-tabs
 * 
 * jQuery plugin that provides responsive tab functionality. The tabs transform to an accordion when it reaches a CSS breakpoint.
 * 
 * @author Jelle Kralt
 * @version v1.6.6
 * @license MIT
 */
!function(t,s,e){var a={version:"1.6.6",active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,fluidHeight:!0,scrollToAccordion:!1,scrollToAccordionOnLoad:!0,scrollToAccordionOffset:0,accordionTabElement:"<div></div>",navigationContainer:"",getversion:function(){},click:function(){},activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",container:"r-tabs",ul:"r-tabs-nav",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};function o(s,e){this.element=s,this.$element=t(s),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=t({}),this.options=t.extend({},a,e),this.init()}o.prototype.init=function(){var e=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),t(s).on("resize",function(t){e._setState(t),!0!==e.options.fluidHeight&&e._equaliseHeights()}),t(s).on("hashchange",function(t){var a=e._getTabRefBySelector(s.location.hash),o=e._getTab(a);a>=0&&!o._ignoreHashChange&&!o.disabled&&e._openTab(t,e._getTab(a),!0)}),!1!==this.options.rotate&&this.startRotation(),!0!==this.options.fluidHeight&&e._equaliseHeights(),this.$element.bind("tabs-click",function(t,s){e.options.click.call(this,t,s)}),this.$element.bind("tabs-getversion",function(t,s){e.options.getversion.call(this,t,s)}),this.$element.bind("tabs-activate",function(t,s){e.options.activate.call(this,t,s)}),this.$element.bind("tabs-deactivate",function(t,s){e.options.deactivate.call(this,t,s)}),this.$element.bind("tabs-activate-state",function(t,s){e.options.activateState.call(this,t,s)}),this.$element.bind("tabs-load",function(t){var s;e._setState(t),!0===e.options.startCollapsed||"accordion"===e.options.startCollapsed&&"accordion"===e.state||(s=e._getStartTab(),e._openTab(t,s),e.options.load.call(this,t,s))}),this.$element.trigger("tabs-load")},o.prototype._loadElements=function(){var s=this,e=""===s.options.navigationContainer?this.$element.children("ul:first"):this.$element.find(s.options.navigationContainer).children("ul:first"),a=[],o=0;return this.$element.addClass(s.options.classes.container),e.addClass(s.options.classes.ul),t("li",e).each(function(){var e,i,n,l,r,c=t(this);if(!c.hasClass(s.options.classes.stateExcluded)){r=(e=t("a",c)).attr("href"),i=t(r),n=t(s.options.accordionTabElement).insertBefore(i),l=t("<a></a>").attr("href",r).html(e.html()).appendTo(n);var h={_ignoreHashChange:!1,id:o,disabled:-1!==t.inArray(o,s.options.disabled),tab:t(this),anchor:t("a",c),panel:i,selector:r,accordionTab:n,accordionAnchor:l,active:!1};o++,a.push(h)}}),a},o.prototype._loadClasses=function(){for(var t=0;t<this.tabs.length;t++)this.tabs[t].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[t].anchor.addClass(this.options.classes.anchor),this.tabs[t].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[t].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[t].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[t].disabled&&(this.tabs[t].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[t].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},o.prototype._loadEvents=function(){for(var t=this,e=function(e){var a=t._getCurrentTab(),o=e.data.tab;e.preventDefault(),o.tab.trigger("tabs-click",o),o.disabled||(t.options.setHash&&(history.pushState?(s.location.origin||(s.location.origin=s.location.protocol+"//"+s.location.hostname+(s.location.port?":"+s.location.port:"")),history.pushState(null,null,s.location.origin+s.location.pathname+s.location.search+o.selector)):s.location.hash=o.selector),(a!==o||t._isCollapisble())&&(t._closeTab(e,a),a===o&&t._isCollapisble()||t._openTab(e,o,!1,!0)))},a=0;a<this.tabs.length;a++)this.tabs[a].anchor.on(t.options.event,{tab:t.tabs[a]},e),this.tabs[a].accordionAnchor.on(t.options.event,{tab:t.tabs[a]},e)},o.prototype._getStartTab=function(){var t=this._getTabRefBySelector(s.location.hash);return t>=0&&!this._getTab(t).disabled?this._getTab(t):this.options.active>0&&!this._getTab(this.options.active).disabled?this._getTab(this.options.active):this._getTab(0)},o.prototype._setState=function(s){var e,a=t("ul:first",this.$element),o=this.state,i="string"==typeof this.options.startCollapsed;a.is(":visible")?this.state="tabs":this.state="accordion",this.state!==o&&(this.$element.trigger("tabs-activate-state",{oldState:o,newState:this.state}),o&&i&&this.options.startCollapsed!==this.state&&void 0===this._getCurrentTab()&&(e=this._getStartTab(s),this._openTab(s,e)))},o.prototype._openTab=function(s,e,a,o){var i,n=this;a&&this._closeTab(s,this._getCurrentTab()),o&&this.rotateInterval>0&&this.stopRotation(),e.active=!0,e.tab.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),e.accordionTab.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),n._doTransition(e.panel,n.options.animation,"open",function(){var a="tabs-load"!==s.type||n.options.scrollToAccordionOnLoad;e.panel.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),"accordion"!==n.getState()||!n.options.scrollToAccordion||n._isInView(e.accordionTab)&&"default"===n.options.animation||!a||(i=e.accordionTab.offset().top-n.options.scrollToAccordionOffset,"default"!==n.options.animation&&n.options.duration>0?t("html, body").animate({scrollTop:i},n.options.duration):t("html, body").scrollTop(i))}),this.$element.trigger("tabs-activate",e)},o.prototype._closeTab=function(t,s){var e,a=this,o="string"==typeof a.options.animationQueue;void 0!==s&&(e=!(!o||a.getState()!==a.options.animationQueue)||!o&&a.options.animationQueue,s.active=!1,s.tab.removeClass(a.options.classes.stateActive).addClass(a.options.classes.stateDefault),a._doTransition(s.panel,a.options.animation,"close",function(){s.accordionTab.removeClass(a.options.classes.stateActive).addClass(a.options.classes.stateDefault),s.panel.removeClass(a.options.classes.stateActive).addClass(a.options.classes.stateDefault)},!e),this.$element.trigger("tabs-deactivate",s))},o.prototype._doTransition=function(t,s,e,a,o){var i,n=this;switch(s){case"slide":i="open"===e?"slideDown":"slideUp";break;case"fade":i="open"===e?"fadeIn":"fadeOut";break;default:i="open"===e?"show":"hide",n.options.duration=0}this.$queue.queue("responsive-tabs",function(o){t[i]({duration:n.options.duration,complete:function(){a.call(t,s,e),o()}})}),("open"===e||o)&&this.$queue.dequeue("responsive-tabs")},o.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},o.prototype._getTab=function(t){return this.tabs[t]},o.prototype._getTabRefBySelector=function(t){for(var s=0;s<this.tabs.length;s++)if(this.tabs[s].selector===t)return s;return-1},o.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},o.prototype._getNextTabRef=function(t){var s=t||this._getCurrentTabRef(),e=s===this.tabs.length-1?0:s+1;return this._getTab(e).disabled?this._getNextTabRef(e):e},o.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},o.prototype._getCurrentTabRef=function(){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].active)return t;return-1},o.prototype._equaliseHeights=function(){var s=0;t.each(t.map(this.tabs,function(t){return s=Math.max(s,t.panel.css("minHeight","").height()),t.panel}),function(){this.css("minHeight",s)})},o.prototype._isInView=function(e){var a=t(s).scrollTop(),o=a+t(s).height(),i=e.offset().top;return i+e.height()<=o&&i>=a},o.prototype.getversion=function(){return this.options.version},o.prototype.activate=function(t,s){var e=jQuery.Event("tabs-activate");this.isNumber(t)||(t=this._getTabRefBySelector(t));var a=this._getTab(t);a.disabled||this._openTab(e,a,!0,s||!0)},o.prototype.isNumber=function(t){return!isNaN(parseFloat(t))&&!isNaN(t-0)},o.prototype.deactivate=function(t){var s=jQuery.Event("tabs-dectivate"),e=this._getTab(t);e.disabled||this._closeTab(s,e)},o.prototype.enable=function(t){var s=this._getTab(t);s&&(s.disabled=!1,s.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),s.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},o.prototype.disable=function(t){var s=this._getTab(t);s&&(s.disabled=!0,s.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),s.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},o.prototype.getState=function(){return this.state},o.prototype.startRotation=function(s){var e=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var t=jQuery.Event("rotate");e._openTab(t,e._getTab(e._getNextTabRef()),!0)},s||(t.isNumeric(e.options.rotate)?e.options.rotate:4e3))},o.prototype.stopRotation=function(){s.clearInterval(this.rotateInterval),this.rotateInterval=0},o.prototype.option=function(t,s){return s&&(this.options[t]=s),this.options[t]},t.fn.responsiveTabs=function(s){var e,a=arguments;return void 0===s||"object"==typeof s?this.each(function(){t.data(this,"responsivetabs")||t.data(this,"responsivetabs",new o(this,s))}):"string"==typeof s&&"_"!==s[0]&&"init"!==s?(e=t.data(this[0],"responsivetabs"),"destroy"===s&&t.data(this,"responsivetabs",null),e instanceof o&&"function"==typeof e[s]?e[s].apply(e,Array.prototype.slice.call(a,1)):this):void 0}}(jQuery,window);
